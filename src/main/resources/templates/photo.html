<!DOCTYPE html>
<html lang="pt-br" xmlns:th="https://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Photo</title>
  <link th:href="@{/output.css}" rel="stylesheet" />
  <link th:href="@{/photo.css}" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" />
</head>
<body>
<div id="post">
  <div id="photo">
    <img th:src="${linkPhoto}" alt="">
    <div id="like">
      <form th:if="${isLiked == false}" th:action="@{/photo/{photo_id}/like(photo_id=${photo_id})}" method="POST">
        <button type="submit"><i class="fa-regular fa-heart"></i></button>
      </form>
      <form th:if="${isLiked == true}" th:action="@{/photo/{photo_id}/unlike(photo_id=${photo_id})}" method="POST">
        <button type="submit"><i class="fa-solid fa-heart"></i></button>
      </form>
      <p th:text="${numberOfLikes}"></p>
    </div>

  </div>

  <div id="comments">
    <div id="comments-header">
      <div id="caption">
        <p th:if="${caption}" th:text="${caption}"></p>
      </div>
      <ul id="tags">
        <li th:each="tag : ${tags}" th:text="'#'+${tag}" class="tag"></li>
      </ul>
    </div>
    <ul id="photo-comments" role="list" class="divide-y divide-gray-100 overflow-y-auto">
      <li th:each="comment : ${comments}" class="flex justify-between gap-x-6 py-5 comment">
        <div class="flex min-w-0 gap-x-4">
          <div class="min-w-0 flex-auto">
            <p th:text="${comment.photographer.name}" class="text-sm/6 font-semibold text-gray-900"></p>
            <p th:text="${comment.commentText}" class="mt-1 truncate text-xs/5 text-gray-500"></p>
          </div>
        </div>
        <div class="hidden shrink-0 sm:flex sm:flex-col sm:items-end">
          <p th:text="${comment.formattedCreatedAt}" class="text-sm/6 text-gray-900"></p>
        </div>
      </li>
    </ul>


    <form id="add-comment" th:action="@{/photo/{photo_id}/add-comment(photo_id=${photo_id})}" method="POST">
      <p th:if="${tooLong}">Comentário muito longo. Insira no máximo 512 caracteres</p>
      <input th:value="${sentComment}" type="text" name="comment" placeholder="Adicione um comentário">
      <button type="submit">Enviar</button>
    </form>
  </div>

</div>
</body>
</html>
